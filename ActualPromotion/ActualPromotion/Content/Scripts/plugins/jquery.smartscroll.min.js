/*!
 * jQuery smartScroll v1.2.1
 * https://github.com/happytodesign/smartScroll
 *
 * Copyright 2013 happytodesign.com (mailbox@happytodesign.com)
 * Released under the MIT license
 *
 * Date: 2013-06-01
 */!function(e){"use strict";function n(n,r){this.menu=n;this._window=e(window);this.options=e.extend(t,r);this._init()}var t={offset:0,activeClass:"active",activeParent:"",filter:"",hash:!1,speed:"relative",maxSpeed:2e3,easing:"swing",activate:function(){},scrollStart:function(){},scrollEnd:function(){}};n.prototype={constructor:n,refresh:function(){this.ids=[];this._offsets={};var t=this,n=e(this.menu).find('[href^="#"], [data-target^="#"]');this.options.filter&&(n=n.filter(this.options.filter));n.each(function(){var n=this.getAttribute("href")||e(this).data("target"),r=e(n).length&&e(n);if(r){e(this).attr("data-target",n);t.ids.push(n);t._offsets[n]=[r.offset().top-t.options.offset,r.offset().top+r.outerHeight(!0)-t.options.offset]}})},scrollTo:function(t){var n=this;n._isScrolling=!0;n.options.scrollStart();var r="relative"===n.options.speed&&Math.abs(n._offsets[t][0]-n.options.offset-n._window.scrollTop())||n.options.speed;r>n.options.maxSpeed&&(r=n.options.maxSpeed);n._activate(t);e("html, body").stop().animate({scrollTop:n._offsets[t][0]},r,n.options.easing,function(){n._isScrolling=!1;n.options.scrollEnd()})},_init:function(){this.refresh();this._monitor();var t=this._window,n=this,r=e.proxy(this.refresh,this);t.on("scroll.smartScroll",e.proxy(this._monitor,this));e(n.menu).on("click",'[data-target="'+n.ids.join('"], [data-target="')+'"]',function(e){e.preventDefault();n.scrollTo(this.getAttribute("data-target"))});t.on("mousewheel.smartScroll DOMMouseScroll.smartScroll",function(t){if(n._isScrolling){n._isScrolling=!1;e("html, body").stop()}});t.on("resize.smartScroll",function(){clearTimeout(this._refreshTimer);this._refreshTimer=setTimeout(function(){r()},25)})},_monitor:function(){if(!this._isScrolling){var e,t=this.ids,n=this._offsets,r=this._window.scrollTop();for(var i=t.length;i--;){var s=t[i];if(r>=n[s][0]&&r<=n[s][1]){e=s;break}}e?this._activate(e):this._activate()}},_activate:function(t){var n=this.menu;if(n.current!==t){n.previous=n.current;var r=n.current=t,i=e(n).find('[data-target="'+r+'"]'),s=this.options.activeParent,o=this.options.activeClass||"active";e(n).find("."+o).removeClass(o);undefined!==r&&(i.closest(s,n).length?i.closest(s,n).addClass(o):i.addClass(o));if(this.options.hash){var u=r;undefined===u&&(u=window.location.pathname);u+=window.location.search;clearTimeout(this._hashTimer);this._hashTimer=setTimeout(function(){history.replaceState({},"",u)},250)}this.options.activate(n)}}};e.fn.smartScroll=function(e){return this.each(function(){new n(this,e)})}}(window.jQuery);