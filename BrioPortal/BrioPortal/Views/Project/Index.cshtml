@model IEnumerable<Brio.Models.Project>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Layouts/DefaultLayouts.cshtml";
}

<section>
    @Html.Partial("RightBarNews")
    <div class="content">
        <form action="" method="post" name="serch">
            <input name="name" type="text" placeholder="ВВЕДИТЕ НАЗВАНИЕ ДОКУМЕНТА">
            <button type="submit"><h2 class="left"><span>Поиск</span></h2></button>
        </form>
        <div class="content-right-bar project-crate-form">
            <h2>Создание проекта</h2>
            @using (Html.BeginForm("Create", "Project", FormMethod.Post, new { enctype = "multipart/form-data" }))
            { 
                <p>Название: @Html.TextBox("Tile")</p>
                <p>Ответственный: @Html.DropDownList("ResponsibleUserId", (SelectList)ViewBag.Users, "--Выберите пользователя--", new { style = "width: 100%" })</p>
                <p>Описание:</p>@Html.TextArea("Description", new { placeholder = "Поле ввода текста..." })
                <p>Начало: @Html.TextBox("StartDate")</p>
                <p>Конец: @Html.TextBox("EndDate")</p>
                <p class="add-file-title">Добавить файлы</p>
                <p><input id="projectDocuments" type="file" name="projectDocuments" multiple /></p>
            <!--<p class="upload-wrapp"><button id="upload" class="open-file">Открыть</button></p>
                <button id="add-file" class="add-file">Добавить</button>-->
                <ol><li>img -добавлен</li></ol>
                <button type="submit"><h2 class="right creat-title"><span>Создать</span></h2></button>
            }
        </div>
        <div class="content-right-bar project" style="display: none">
            <h2 class="title"></h2>
            <div class="staf">
                <ul class="staf-text">
                    <li class="description">Описание: <span></span></li>
                    <li class="responsible">Ответственный: <span></span></li>
                    <li class="start">Начало: <span></span></li>
                    <li class="end">Конец: <span></span></li>
                    <li>Прикрепленные файлы:</li>
                    <div class="docs">

                    </div>
                </ul>
            </div>
        </div>
        <div class="content-right-bar project-step-form" style="display: none">
            <h2>Создание этапа</h2>
            @using (Html.BeginForm("CreateProjectStep", "Project", FormMethod.Post, new { }))
            {
                <p>Название: @Html.TextBox("Title")</p>
                <p>Описание:</p>@Html.TextArea("Description", new { placeholder = "Поле ввода текста..." })
                @Html.Hidden("ProjectId");

                <button type="submit"><h2 class="right creat-title"><span>Создать</span></h2></button>
            }
        </div>
        <div class="content-right-bar project-steps" style="display: none">
            <h2 class="title"></h2>
            <div class="staf">
                <ul class="staf-text">
                    <li class="description">Описание: <span></span></li>
                </ul>
            </div>
        </div>
        <div class="content-left-bar">
            <h2 class="right white plus shadow"><span class="project-title">Проекты</span></h2>
            <div class="wrapp progect-page">
                <ul>
                    @foreach(var p in Model) {
                        <li data-project-id="@p.ID">
                            <p class="proj_title"><span>@p.Tile</span></p>
                            <ul>
                                @foreach (var step in p.ProjectSteps)
                                {
                                    <li data-step-id="@step.ID">@step.Title</li>
                                }
                                <li class="add">Добавить этап</li>
                            </ul>
                        </li>
                    }
                </ul>
            </div>
        </div>
    </div>
</section>

<script>
    (function () {
        $("#StartDate").datepicker();
        $("#EndDate").datepicker();

        var _project = new Project();
        _project.init();
    })();
</script>